---
import type { LanguageKeys } from '@/i18n'
import { getEntry } from 'astro:content'
import About from '@/components/landing/About.astro'
import Contact from '@/components/landing/Contact.astro'
import Events from '@/components/landing/Events.astro'
import Hero from '@/components/landing/Hero.astro'
import Separator from '@/components/Separator.vue'
import BaseLayout from '@/layouts/BaseLayout.astro'
import { siteConfig } from '@/site.config'

export function getStaticPaths() {
  const { languages } = siteConfig.i18n
  return Object.keys(languages).map((lang) => ({
    params: { lang: lang as LanguageKeys },
  }))
}

const { lang } = Astro.params
const page = await getEntry('index', lang)

if (!page) {
  throw new Error('Could not find page')
}
---

<BaseLayout title={page.data.title} description={page.data.description} lang={lang}>
  <Hero page={page} lang={lang} />
  <Separator />
  <About page={page} lang={lang} />
  <Separator />
  <Events page={page} lang={lang} />
  <Separator />
  <Contact lang={lang} />
</BaseLayout>
