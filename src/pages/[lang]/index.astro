---
import type { LanguageKeys } from '@/i18n/ui'
import { getEntry } from 'astro:content'
import BaseHead from '@/components/BaseHead.astro'
import Footer from '@/components/Footer.astro'
import Header from '@/components/Header.astro'
import About from '@/components/landing/About.astro'
import Contact from '@/components/landing/Contact.astro'
import Events from '@/components/landing/Events.astro'
import Hero from '@/components/landing/Hero.astro'
import Separator from '@/components/Separator.vue'
import { siteConfig } from '@/site.config'

export function getStaticPaths() {
  const { languages } = siteConfig.i18n
  return Object.keys(languages).map((lang) => ({
    params: { lang: lang as LanguageKeys },
  }))
}

const { title, description } = siteConfig

const { lang } = Astro.params
const page = await getEntry('index', lang)

if (!page) {
  throw new Error('Could not find page')
}
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
  </head>
  <body>
    <Header />
    <main class="my-16 lg:my-48">
      <Hero page={page} lang={lang} />
      <Separator />
      <About page={page} lang={lang} />
      <Separator />
      <Events page={page} lang={lang} />
      <Separator />
      <Contact lang={lang} />
    </main>
    <Footer />
  </body>
</html>
