---
import { getLangFromUrl } from '@/i18n'
import { siteConfig } from '@/site.config'

interface Props extends Intl.DateTimeFormatOptions {
  datetime?: number | string | Date
}

const { datetime = Date.now(), ...formatOptions } = Astro.props

const date = datetime instanceof Date ? datetime : new Date(datetime)
const lang = getLangFromUrl(Astro.url)
const { languages } = siteConfig.i18n
---

<time datetime={date.toISOString()}>
  {date.toLocaleDateString(languages[lang].code, formatOptions)}
</time>
